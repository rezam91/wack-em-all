<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
        <link rel="stylesheet" href="./assets/styles/index.css">
    </head>
    <body>
        <div class="container">
            <img class="hero" src="./assets/images/Copilot_20250601_222257.png" alt="" width="300px">
            <div class="game-info">
                <div id='timer' class="row">
                    <span>Time</span>
                    <span>10</span>
                </div>
                <div id="points" class="row">
                    <span>Points</span>
                    <span>0</span>
                </div>
                <button id="startGameButton" onclick="startGame(); randomColors()">Start Game!</button>
            </div>
            <div id="game">
                <ul id="boxes">
                    <li onclick="checkClick(0)"></li>
                    <li onclick="checkClick(1)"></li>
                    <li onclick="checkClick(2)"></li>
                    <li onclick="checkClick(3)"></li>
                    <li onclick="checkClick(4)"></li>
                    <li onclick="checkClick(5)"></li>
                    <li onclick="checkClick(6)"></li>
                    <li onclick="checkClick(7)"></li>
                    <li onclick="checkClick(8)"></li>
                    <li onclick="checkClick(9)"></li>
                    <li onclick="checkClick(10)"></li>
                    <li onclick="checkClick(11)"></li>
                </ul>
                <button id="resetGameButton" onclick="resetGame()">Reset Game!</button>
            </div>
        </div>
    </body>
    <script>
        let gameCounter = null
        let RandomColorIntervals = null
        const timerSpan = document.getElementById('timer').getElementsByTagName('span')[1]
        const pointSpan = document.getElementById('points').getElementsByTagName('span')[1]
        const startGame = () => {
            document.getElementById('game').style.display = 'block'
            document.getElementById('startGameButton').style.display = 'none'
            gameCounter = setInterval(() =>{
                timerSpan.innerText = parseInt(timerSpan.innerText-1)
                checkTimeUp()
            },1000)

        }
        const randomColors = () => {
            RandomColorIntervals = setInterval(() => {
                let num = Math.floor(Math.random()*12)
                // document.getElementById('boxes').getElementsByTagName('li').forEach((item) => {
                //     item.style.backgroundColor = "beige"
                // })
                for (let i=0; i<12; i++) {
                    document.getElementById('boxes').getElementsByTagName('li')[i].style.backgroundColor = "beige"    
                }
                document.getElementById('boxes').getElementsByTagName('li')[num].style.backgroundColor = "blue"
            },1000)
        }
        const checkTimeUp = () => {
            if (!parseInt(timerSpan.innerText)) {
                clearInterval(gameCounter)
                clearInterval(RandomColorIntervals)
                document.getElementById('timer').style.color = 'red'
                document.getElementById('timer').style.fontWeight = '600'
                for (let i=0; i<12; i++) {
                    document.getElementById('boxes').getElementsByTagName('li')[i].style.backgroundColor = "beige"    
                }
            }
        }
        const checkClick = (answer) => {
            if (document.getElementById('boxes').getElementsByTagName('li')[answer].style.backgroundColor === "blue") {
                document.getElementById('boxes').getElementsByTagName('li')[answer].style.backgroundColor = "green"
                pointSpan.innerText = parseInt(pointSpan.innerText) + 1
            } else if (document.getElementById('boxes').getElementsByTagName('li')[answer].style.backgroundColor === "beige") {
                document.getElementById('boxes').getElementsByTagName('li')[answer].style.backgroundColor = 'red'
                pointSpan.innerText = parseInt(pointSpan.innerText) - 1
            }
        }
        const resetGame = () => {
            window.location.reload(true)
        }
    </script>
</html>