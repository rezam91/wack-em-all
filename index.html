<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="./assets/styles/index.css">
    </head>
    <body>
        <div class="container">
            <img class="hero" src="./assets/images/Copilot_20250601_222257.png" alt="" width="300px">
            <div class="game-info">
                <div id='timer' class="row">
                    <span>Time</span>
                    <span>10</span>
                </div>
                <div id="points" class="row">
                    <span>Points</span>
                    <span>0</span>
                </div>
                <button id="startGameButton" onclick="startGame()">Start Game!</button>
            </div>
            <div id="ready">
                <span>Are You Ready ?!</span>
                <span>3</span>
            </div>
            <div id="game">
                <ul id="boxes">
                    <li onclick="checkClick(0)"></li>
                    <li onclick="checkClick(1)"></li>
                    <li onclick="checkClick(2)"></li>
                    <li onclick="checkClick(3)"></li>
                    <li onclick="checkClick(4)"></li>
                    <li onclick="checkClick(5)"></li>
                    <li onclick="checkClick(6)"></li>
                    <li onclick="checkClick(7)"></li>
                    <li onclick="checkClick(8)"></li>
                    <li onclick="checkClick(9)"></li>
                    <li onclick="checkClick(10)"></li>
                    <li onclick="checkClick(11)"></li>
                </ul>
                <button id="resetGameButton" onclick="resetGame()">Reset Game!</button>
            </div>
        </div>
    </body>
    <script>
        let gameCounter = null
        let RandomColorIntervals = null
        const timerSpan = document.getElementById('timer').getElementsByTagName('span')[1]
        const pointSpan = document.getElementById('points').getElementsByTagName('span')[1]
        const startGame = () => {
            document.getElementById('ready').style.display = 'flex'
            document.getElementById('ready').style.flexDirection = 'column'
            document.getElementById('startGameButton').style.display = 'none'
            let counter321 = setInterval(()=>{
                document.getElementById('ready').getElementsByTagName('span')[1].innerText = parseInt(document.getElementById('ready').getElementsByTagName('span')[1].innerText)-1
            },1000)
            setTimeout(() => {
                clearInterval(counter321)
                document.getElementById('ready').style.display = 'none'
                document.getElementById('game').style.display = 'block'
                randomColors()
                gameCounter = setInterval(() =>{
                    timerSpan.innerText = parseInt(timerSpan.innerText-1)
                    checkTimeUp()
                },1000)
            },3000)

        }
        const randomColors = () => {
                let num = Math.floor(Math.random()*12)
                for (let i=0; i<12; i++) {
                    document.getElementById('boxes').getElementsByTagName('li')[i].style.backgroundColor = "beige"    
                }
                document.getElementById('boxes').getElementsByTagName('li')[num].style.backgroundColor = "blue"
            RandomColorIntervals = setInterval(() => {
                num = Math.floor(Math.random()*12)
                // document.getElementById('boxes').getElementsByTagName('li').forEach((item) => {
                //     item.style.backgroundColor = "beige"
                // })
                for (let i=0; i<12; i++) {
                    document.getElementById('boxes').getElementsByTagName('li')[i].style.backgroundColor = "beige"    
                }
                document.getElementById('boxes').getElementsByTagName('li')[num].style.backgroundColor = "blue"
            },1000)
        }
        const checkTimeUp = () => {
            if (!parseInt(timerSpan.innerText)) {
                clearInterval(gameCounter)
                clearInterval(RandomColorIntervals)
                document.getElementById('timer').style.color = 'red'
                document.getElementById('timer').style.fontWeight = '600'
                for (let i=0; i<12; i++) {
                    document.getElementById('boxes').getElementsByTagName('li')[i].style.backgroundColor = "cadetblue"    
                }
                document.getElementById('boxes').getElementsByTagName('li')[4].innerText = "FI"
                document.getElementById('boxes').getElementsByTagName('li')[5].innerText = "NI"
                document.getElementById('boxes').getElementsByTagName('li')[6].innerText = "SH"
                document.getElementById('boxes').getElementsByTagName('li')[7].innerText = "ED"
            }
        }
        const checkClick = (answer) => {
            if (document.getElementById('boxes').getElementsByTagName('li')[answer].style.backgroundColor === "blue") {
                document.getElementById('boxes').getElementsByTagName('li')[answer].style.backgroundColor = "green"
                pointSpan.innerText = parseInt(pointSpan.innerText) + 1
                clearInterval(RandomColorIntervals)
                randomColors()
            } else if (document.getElementById('boxes').getElementsByTagName('li')[answer].style.backgroundColor === "beige") {
                document.getElementById('boxes').getElementsByTagName('li')[answer].style.backgroundColor = 'red'
                pointSpan.innerText = parseInt(pointSpan.innerText) - 1
                // clearInterval(RandomColorIntervals)
                // randomColors()
            }
        }
        const resetGame = () => {
            window.location.reload(true)
        }
    </script>
</html>